(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9554:(e,t,s)=>{Promise.resolve().then(s.bind(s,3547))},3547:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(4750),n=s(6494),r=s(9991),i=s(6552),l=s(9181),o=s(6513);let c={31337:"0x40e8Aa088739445BC3a3727A724F56508899f65B",0xaa36a7:"0xead137D42d2E6A6a30166EaEf97deBA1C3D1954e"},d=[{inputs:[],name:"getCount",outputs:[{internalType:"euint32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"externalEuint32",name:"inputEuint32",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"increment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"externalEuint32",name:"inputEuint32",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"decrement",outputs:[],stateMutability:"nonpayable",type:"function"}];function m(e){let{account:t,chainId:s,isConnected:r,isInitialized:m,onMessage:u}=e,[x,h]=(0,n.useState)(""),[p,y]=(0,n.useState)(null),[g,w]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),j=c[s]||"Not supported chain",N=async()=>{if(r&&j&&window.ethereum)try{u("Reading contract...");let e=new i.k(window.ethereum),t=new l.NZ(j,d,e),s=await t.getCount();h(s),u("Contract read successfully!"),setTimeout(()=>u(""),3e3)}catch(e){console.error("Get count failed:",e),u("Failed to get count")}},b=async()=>{if(x&&window.ethereum)try{v(!0),u("Decrypting with EIP-712 user decryption...");let e=new i.k(window.ethereum),t=await e.getSigner(),s=await (0,o.pN)(x,j,t);y(s),u("EIP-712 decryption completed!"),setTimeout(()=>u(""),3e3)}catch(e){console.error("Decryption failed:",e),u("Decryption failed")}finally{v(!1)}},k=async()=>{if(r&&j&&window.ethereum)try{w(!0),u("Starting increment transaction...");let e=new i.k(window.ethereum),s=await e.getSigner(),a=new l.NZ(j,d,s);u("Encrypting input...");let n=await (0,o.vz)(j,t,1);u("Sending transaction...");let r=await a.increment(n.encryptedData,n.proof);u("Waiting for confirmation...");let c=await r.wait();u("Increment completed!"),console.log("✅ Increment transaction completed:",c),setTimeout(()=>u(""),3e3)}catch(e){console.error("Increment failed:",e),u("Increment failed")}finally{w(!1)}},C=async()=>{if(r&&j&&window.ethereum)try{w(!0),u("Starting decrement transaction...");let e=new i.k(window.ethereum),s=await e.getSigner(),a=new l.NZ(j,d,s);u("Encrypting input...");let n=await (0,o.vz)(j,t,1);u("Sending transaction...");let r=await a.decrement(n.encryptedData,n.proof);u("Waiting for confirmation...");let c=await r.wait();u("Decrement completed!"),console.log("✅ Decrement transaction completed:",c),setTimeout(()=>u(""),3e3)}catch(e){console.error("Decrement failed:",e),u("Decrement failed")}finally{w(!1)}};return r&&m?(0,a.jsxs)("div",{className:"glass-card p-8 hover:border-[#FFEB3B] transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsxs)("svg",{className:"w-6 h-6 text-[#FFEB3B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),(0,a.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"FHEVM Counter Demo"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Using REAL FHEVM SDK on Sepolia testnet"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:N,className:"btn-primary w-full",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Get Count"]}),x&&(0,a.jsxs)("div",{className:"mt-4 info-card border-[#FFEB3B]/30",children:[(0,a.jsx)("span",{className:"text-gray-400 text-xs font-medium block mb-2",children:"Encrypted Handle"}),(0,a.jsx)("span",{className:"code-text text-[#FFEB3B] text-xs",children:x})]})]}),(0,a.jsx)("div",{className:"h-px bg-[#2A2A2A]"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:b,disabled:!x||f,className:"btn-secondary w-full",children:[f?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),(0,a.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),f?"Decrypting...":"Decrypt Count"]}),null!==p&&(0,a.jsx)("div",{className:"mt-4 info-card border-green-500/30 bg-green-500/5",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Decrypted Count"}),(0,a.jsx)("span",{className:"text-[#FFEB3B] text-3xl font-bold",children:p})]})})]}),(0,a.jsx)("div",{className:"h-px bg-[#2A2A2A]"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:k,disabled:g,className:"btn-primary",children:[g?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),g?"Processing...":"Increment"]}),(0,a.jsxs)("button",{onClick:C,disabled:g,className:"btn-danger",children:[g?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})}),g?"Processing...":"Decrement"]})]})]})]}):null}var u=s(6774);let x="0xcA2430F1B112EC25cF6b6631bb40039aCa0C86e0",h=[{inputs:[],name:"createReviewCard",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"creationFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"cardId",type:"uint256"}],name:"getCardInfo",outputs:[{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"bool",name:"exists",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"cardId",type:"uint256"}],name:"getEncryptedStats",outputs:[{internalType:"bytes32",name:"sum",type:"bytes32"},{internalType:"bytes32",name:"count",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalCards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"cardId",type:"uint256"},{internalType:"address",name:"voter",type:"address"}],name:"hasAddressVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"cardId",type:"uint256"},{internalType:"externalEuint32",name:"encryptedRating",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"submitEncryptedRating",outputs:[],stateMutability:"nonpayable",type:"function"}];function p(e){let{account:t,chainId:s,isConnected:r,isInitialized:c,onMessage:d}=e,[m,p]=(0,n.useState)([]),[y,g]=(0,n.useState)(0),[w,f]=(0,n.useState)("0"),[v,j]=(0,n.useState)(!1),[N,b]=(0,n.useState)(null),[k,C]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=localStorage.getItem("fhe-ratings-cards");e&&p(JSON.parse(e))},[]),(0,n.useEffect)(()=>{localStorage.setItem("fhe-ratings-cards",JSON.stringify(m))},[m]);let B=async()=>{if(r&&window.ethereum)try{let e=new i.k(window.ethereum),t=new l.NZ(x,h,e),[s,a]=await Promise.all([t.getTotalCards(),t.creationFee()]);g(Number(s)),f(u.ck(a))}catch(e){console.error("Failed to load contract data:",e)}},F=async()=>{if(r&&window.ethereum)try{d("Loading cards from contract...");let e=new i.k(window.ethereum),s=new l.NZ(x,h,e),a=[];for(let e=0;e<y;e++)try{let[n,r,i]=await s.getCardInfo(e),l=await s.hasAddressVoted(e,t);i&&a.push({id:e,createdAt:Number(n),creator:r,exists:!0,hasVoted:l})}catch(t){console.error("Failed to load card ".concat(e,":"),t)}p(a),d("Loaded ".concat(a.length," cards from contract!")),setTimeout(()=>d(""),3e3)}catch(e){console.error("Failed to load cards:",e),d("Failed to load cards")}},E=async()=>{if(r&&window.ethereum)try{j(!0),d("Creating new review card...");let e=new i.k(window.ethereum),t=await e.getSigner(),s=new l.NZ(x,h,t),a=u.g5(w),n=await s.createReviewCard({value:a});d("Waiting for confirmation...");let r=await n.wait();d("Review card created successfully!"),console.log("✅ Card creation transaction completed:",r),await B(),await F(),setTimeout(()=>d(""),3e3)}catch(e){console.error("Card creation failed:",e),d("Card creation failed")}finally{j(!1)}},S=(e,t)=>{p(s=>s.map(s=>s.id===e?{...s,selectedRating:t}:s))},M=async(e,s)=>{if(r&&window.ethereum)try{b(e),d("Submitting rating ".concat(s,"/5 for card ").concat(e,"..."));let a=new i.k(window.ethereum),n=await a.getSigner(),r=new l.NZ(x,h,n);d("Encrypting rating...");let c=await (0,o.vz)(x,t,s);d("Submitting encrypted rating...");let m=await r.submitEncryptedRating(e,c.encryptedData,c.proof);d("Waiting for confirmation...");let u=await m.wait();d("Rating ".concat(s,"/5 submitted successfully!")),console.log("✅ Rating submission transaction completed:",u),p(t=>t.map(t=>t.id===e?{...t,selectedRating:void 0}:t)),await F(),setTimeout(()=>d(""),3e3)}catch(e){console.error("Rating submission failed:",e),d("Rating submission failed")}finally{b(null)}},A=async e=>{if(c&&window.ethereum)try{C(e),d("Decrypting stats for card ".concat(e,"..."));let t=new i.k(window.ethereum),s=new l.NZ(x,h,t),[a,n]=await s.getEncryptedStats(e);d("Performing public decryption...");let[r,c]=await Promise.all([(0,o.$v)(a),(0,o.$v)(n)]),m=c>0?r/c:0;p(t=>t.map(t=>t.id===e?{...t,decryptedSum:r,decryptedCount:c,averageRating:Math.round(100*m)/100}:t)),d("Stats decrypted: ".concat(r," total, ").concat(c," ratings, ").concat(m.toFixed(2)," average")),setTimeout(()=>d(""),3e3)}catch(e){console.error("Stats decryption failed:",e),d("Stats decryption failed")}finally{C(null)}};return((0,n.useEffect)(()=>{r&&B()},[r]),r&&c)?(0,a.jsxs)("div",{className:"glass-card p-8 hover:border-[#FFEB3B] transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-[#FFEB3B]",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"FHE Ratings Demo"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Encrypted rating system with public decryption"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"info-card",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Total Cards: "}),(0,a.jsx)("span",{className:"text-[#FFEB3B] text-xl font-bold",children:y})]}),(0,a.jsxs)("div",{className:"info-card",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Creation Fee: "}),(0,a.jsxs)("span",{className:"text-[#FFEB3B] text-xl font-bold",children:[w," ETH"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:E,disabled:v,className:"btn-primary",children:[v?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),v?"Creating...":"Create Card"]}),(0,a.jsxs)("button",{onClick:F,className:"btn-secondary",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Load Cards"]})]}),m.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white",children:"Review Cards"}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-4 pr-2",children:m.map(e=>{var t;return(0,a.jsxs)("div",{className:"info-card border-[#FFEB3B]/30",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-white font-semibold",children:["Card #",e.id]}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Created: ",new Date(1e3*e.createdAt).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",children:["Creator: ",e.creator.slice(0,6),"...",e.creator.slice(-4)]})]}),(0,a.jsx)("div",{className:"text-right",children:e.hasVoted?(0,a.jsx)("span",{className:"text-green-400 text-sm font-medium",children:"✓ Voted"}):(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"Not voted"})})]}),void 0!==e.decryptedSum&&void 0!==e.decryptedCount&&(0,a.jsx)("div",{className:"mb-3 p-3 bg-[#0A0A0A] rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"Total"}),(0,a.jsx)("p",{className:"text-[#FFEB3B] font-bold",children:e.decryptedSum})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"Count"}),(0,a.jsx)("p",{className:"text-[#FFEB3B] font-bold",children:e.decryptedCount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"Average"}),(0,a.jsx)("p",{className:"text-[#FFEB3B] font-bold",children:null===(t=e.averageRating)||void 0===t?void 0:t.toFixed(2)})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[!e.hasVoted&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,a.jsx)("button",{onClick:()=>S(e.id,t),className:"transition-colors duration-200 ".concat(e.selectedRating&&t<=e.selectedRating?"text-yellow-400 hover:text-yellow-300":"text-gray-500 hover:text-gray-400"),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},t))}),e.selectedRating&&(0,a.jsx)("button",{onClick:()=>M(e.id,e.selectedRating),disabled:N===e.id,className:"btn-primary text-sm px-4 py-2",children:N===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Submit Rating ",e.selectedRating,"/5"]})})]}),(0,a.jsx)("button",{onClick:()=>A(e.id),disabled:k===e.id,className:"btn-secondary w-full",children:k===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Decrypting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),(0,a.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Public Decrypt"]})})]})]},e.id)})})]})]})]}):null}let y=[{inputs:[{internalType:"uint256",name:"durationSeconds",type:"uint256"}],name:"createSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"sessionId",type:"uint256"}],name:"getSession",outputs:[{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"resolved",type:"bool"},{internalType:"uint32",name:"yesVotes",type:"uint32"},{internalType:"uint32",name:"noVotes",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSessionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"hasVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"sessionId",type:"uint256"}],name:"requestTallyReveal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"sessionId",type:"uint256"},{internalType:"externalEuint32",name:"encryptedVote",type:"bytes32"},{internalType:"bytes",name:"proof",type:"bytes"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],g="0x7294A541222ce449faa2B8A7214C571b0fCAb52E",w=e=>{let{account:t,chainId:s,isConnected:r,isInitialized:c,onMessage:d}=e,[m,u]=(0,n.useState)([]),[x,h]=(0,n.useState)(!1),[p,w]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),[b,k]=(0,n.useState)(60),[C,B]=(0,n.useState)(!1),[F,E]=(0,n.useState)(""),[S,M]=(0,n.useState)([]),[A,z]=(0,n.useState)(0);(0,n.useEffect)(()=>{r&&c&&T()},[r,c,t]);let T=async()=>{if(window.ethereum)try{h(!0);let e=new i.k(window.ethereum),s=new l.NZ(g,y,e),a=await s.getSessionCount(),n=[];for(let e=0;e<Number(a);e++)try{let a=await s.getSession(e),r=await s.hasVoted(e,t),i={id:e,creator:a.creator,endTime:Number(a.endTime),resolved:a.resolved,yesVotes:Number(a.yesVotes),noVotes:Number(a.noVotes),hasVoted:r,canRequestTally:a.creator.toLowerCase()===t.toLowerCase()&&!a.resolved&&Date.now()/1e3>Number(a.endTime)};n.push(i)}catch(t){console.error("Error loading session ".concat(e,":"),t)}u(n)}catch(e){console.error("Error loading sessions:",e),d("Failed to load voting sessions")}finally{h(!1)}},L=async()=>{if(window.ethereum&&t)try{h(!0),d("Creating new voting session...");let e=new i.k(window.ethereum),t=await e.getSigner(),s=new l.NZ(g,y,t),a=await s.createSession(60*b);await a.wait(),d("Voting session created successfully!"),await T()}catch(e){console.error("Error creating session:",e),d("Failed to create voting session")}finally{h(!1)}},R=async(e,s)=>{if(window.ethereum&&t)try{w(!0),d("Casting ".concat(s," vote..."));let a=new i.k(window.ethereum),n=await a.getSigner(),r=new l.NZ(g,y,n),c=await (0,o.vz)(g,t,"yes"===s?1:0),m=await r.vote(e,c.encryptedData,c.proof);await m.wait(),d("Vote cast successfully!"),N(null),await T()}catch(e){console.error("Error casting vote:",e),d("Failed to cast vote")}finally{w(!1)}},D=async e=>{if(window.ethereum&&t)try{v(!0),d("Requesting tally reveal...");let t=new i.k(window.ethereum),s=await t.getSigner(),a=new l.NZ(g,y,s),n=await a.requestTallyReveal(e);await n.wait(),d("Tally reveal requested successfully!"),await T()}catch(e){console.error("Error requesting tally reveal:",e),d("Failed to request tally reveal")}finally{v(!1)}},V=e=>new Date(1e3*e).toLocaleString(),H=e=>Date.now()/1e3<e,I=async e=>{if(window.ethereum)try{let t=new i.k(window.ethereum),s=new l.NZ(g,y,t),a=await s.getSession(e);u(t=>t.map(t=>t.id===e?{...t,resolved:a.resolved,yesVotes:Number(a.yesVotes),noVotes:Number(a.noVotes)}:t)),d("Final tally for Session #".concat(e,": Yes: ").concat(a.yesVotes,", No: ").concat(a.noVotes))}catch(e){console.error("Error getting final tally:",e),d("Failed to get final tally")}};return r&&c?(0,a.jsxs)("div",{className:"glass-card p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-[#FFEB3B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"FHE Voting"})]}),(0,a.jsxs)("button",{onClick:()=>B(!0),disabled:x,className:"btn-primary",children:[x?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Session"]})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-[#0A0A0A] border border-[#FFEB3B]/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-[#FFEB3B]",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"text-[#FFEB3B] font-semibold text-sm",children:"How FHE Voting Works"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-300",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"text-[#FFEB3B]",children:"Encrypted Votes:"})," Your Yes/No votes are encrypted using FHEVM before submission, keeping your choice private."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"text-[#FFEB3B]",children:"Oracle Callbacks:"})," After voting ends, the oracle decrypts the encrypted tallies and reveals the results."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"text-[#FFEB3B]",children:"Privacy Preserving:"})," Individual votes remain private until the session creator requests tally reveal."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"text-[#FFEB3B]",children:"Decryption Process:"})," Only session creators can request tally reveal, which triggers oracle decryption of the encrypted vote counts."]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:x?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsxs)("svg",{className:"w-8 h-8 text-[#FFEB3B] animate-spin mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading sessions..."})]}):0===m.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-[#3A3A3A] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("p",{className:"text-gray-400",children:"No voting sessions found"})]}):(0,a.jsxs)(a.Fragment,{children:[m.slice(2*A,(A+1)*2).map(e=>(0,a.jsxs)("div",{className:"p-4 bg-[#0A0A0A] border border-gray-700 rounded-lg hover:border-[#FFEB3B] transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Session #",e.id]}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Created: ",V(e.endTime-b)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat(H(e.endTime)?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:H(e.endTime)?"Active":"Ended"}),e.hasVoted&&(0,a.jsx)("div",{className:"mt-1 text-xs text-[#FFEB3B]",children:"Voted"})]})]}),H(e.endTime)&&!e.hasVoted&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsxs)("button",{onClick:()=>N("yes"===j?null:"yes"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-all ".concat("yes"===j?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,a.jsx)("svg",{className:"w-4 h-4 inline mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"YES"]}),(0,a.jsxs)("button",{onClick:()=>N("no"===j?null:"no"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-all ".concat("no"===j?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,a.jsx)("svg",{className:"w-4 h-4 inline mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"NO"]})]}),j&&(0,a.jsxs)("button",{onClick:()=>R(e.id,j),disabled:p,className:"w-full btn-primary",children:[p?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit ",j.toUpperCase()," Vote"]})]}),e.resolved&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-[#1A1A1A] rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Results"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-3",children:[(0,a.jsxs)("span",{className:"text-green-400",children:["Yes: ",e.yesVotes]}),(0,a.jsxs)("span",{className:"text-red-400",children:["No: ",e.noVotes]})]}),(0,a.jsxs)("button",{onClick:()=>I(e.id),className:"w-full px-3 py-2 bg-[#FFEB3B] text-[#0A0A0A] rounded-lg font-semibold text-sm hover:bg-[#FDD835] transition-all duration-200 flex items-center justify-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Get Final Tally"]})]}),e.canRequestTally&&(0,a.jsxs)("button",{onClick:()=>D(e.id),disabled:f,className:"w-full btn-secondary",children:[f?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Request Tally Reveal"]})]},e.id)),m.length>2&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4",children:[(0,a.jsx)("button",{onClick:()=>z(Math.max(0,A-1)),disabled:0===A,className:"px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("span",{className:"px-3 py-1 text-sm text-gray-400",children:["Page ",A+1," of ",Math.ceil(m.length/2)]}),(0,a.jsx)("button",{onClick:()=>z(Math.min(Math.ceil(m.length/2)-1,A+1)),disabled:A>=Math.ceil(m.length/2)-1,className:"px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})]})}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-[#1A1A1A] border border-[#FFEB3B]/30 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Create Voting Session"}),(0,a.jsx)("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Vote Topic"}),(0,a.jsx)("input",{type:"text",value:F,onChange:e=>E(e.target.value),placeholder:"Enter the topic for this vote...",className:"w-full px-3 py-2 bg-[#0A0A0A] border border-gray-600 rounded-lg text-white focus:border-[#FFEB3B] focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (minutes)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>k(Math.max(1,b-1)),className:"p-2 bg-[#374151] border-2 border-[#4B5563] rounded-lg hover:border-[#FFEB3B] hover:bg-[#4B5563] transition-all duration-200 min-w-[2.5rem] h-[2.5rem] flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})}),(0,a.jsx)("input",{type:"number",value:b,onChange:e=>k(Math.max(1,Number(e.target.value))),className:"flex-1 px-3 py-2 bg-[#0A0A0A] border border-gray-600 rounded-lg text-white text-center focus:border-[#FFEB3B] focus:outline-none",min:"1"}),(0,a.jsx)("button",{onClick:()=>k(b+1),className:"p-2 bg-[#374151] border-2 border-[#4B5563] rounded-lg hover:border-[#FFEB3B] hover:bg-[#4B5563] transition-all duration-200 min-w-[2.5rem] h-[2.5rem] flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{onClick:()=>B(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:async()=>{if(F.trim()){let e={id:Date.now(),topic:F,duration:b,createdAt:new Date().toISOString()};M(t=>[...t,e]),await L(),E(""),B(!1)}},disabled:!F.trim()||x,className:"flex-1 btn-primary",children:x?"Creating...":"Create Session"})]})]})]})})]}):(0,a.jsxs)("div",{className:"glass-card p-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-[#FFEB3B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"FHE Voting"})]}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-[#3A3A3A] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("p",{className:"text-gray-400",children:"Connect your wallet to use FHE Voting features"})]})]})},f={31337:"0x40e8Aa088739445BC3a3727A724F56508899f65B",0xaa36a7:"0xead137D42d2E6A6a30166EaEf97deBA1C3D1954e"},v={chainId:"0xaa36a7",chainName:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:["https://sepolia.infura.io/v3/"],blockExplorerUrls:["https://sepolia.etherscan.io/"]};function j(){let{fheInstance:e,isInitialized:t,error:s,initialize:i}=(0,r.w)(),[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(0),[u,x]=(0,n.useState)(!1),[h,y]=(0,n.useState)(""),g=f[c]||"Not supported chain",[j,N]=(0,n.useState)(!1),[b,k]=(0,n.useState)("");(0,n.useEffect)(()=>{!u||t||s||i().catch(console.error)},[u,t,s,i]);let C=async()=>{if(console.log("\uD83D\uDD17 Attempting to connect wallet..."),!window.ethereum){console.error("❌ No Ethereum provider found. Please install MetaMask or connect a wallet."),alert("Please install MetaMask or connect a wallet to use this app.");return}try{console.log("\uD83D\uDCF1 Requesting accounts...");let e=await window.ethereum.request({method:"eth_requestAccounts"});console.log("✅ Accounts received:",e);let t=await window.ethereum.request({method:"eth_chainId"});console.log("\uD83D\uDD17 Chain ID:",t),o(e[0]),d(parseInt(t,16)),x(!0),console.log("✅ Wallet connected successfully!")}catch(e){console.error("❌ Wallet connection failed:",e),alert("Wallet connection failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},B=async()=>{if(!window.ethereum){k("No Ethereum provider found");return}try{N(!0),k(""),y("Switching to Sepolia network..."),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:v.chainId}]});let e=await window.ethereum.request({method:"eth_chainId"});d(parseInt(e,16)),y("Successfully switched to Sepolia!"),console.log("✅ Network switched to Sepolia"),setTimeout(()=>y(""),3e3)}catch(e){if(console.error("Network switch failed:",e),4902===e.code)try{y("Adding Sepolia network..."),await window.ethereum.request({method:"wallet_addEthereumChain",params:[v]});let e=await window.ethereum.request({method:"eth_chainId"});d(parseInt(e,16)),y("Sepolia network added and switched!"),console.log("✅ Sepolia network added and switched"),setTimeout(()=>y(""),3e3)}catch(e){console.error("Failed to add Sepolia network:",e),k("Failed to add Sepolia network. Please add it manually in your wallet."),y("Failed to add Sepolia network")}else k("Failed to switch network: ".concat(e.message||"Unknown error")),y("Failed to switch network")}finally{N(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0A0A0A] text-white",children:[(0,a.jsx)("header",{className:"bg-gradient-to-r from-[#FFEB3B] to-[#FDD835] border-b-4 border-black shadow-2xl",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-black rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-[#FFEB3B]",viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-black text-3xl font-bold tracking-tight",children:"Universal FHEVM SDK"}),(0,a.jsx)("p",{className:"text-black/70 text-sm font-medium mt-1",children:"Next.js Showcase"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:t?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"status-badge bg-green-600 text-white",children:"READY"})]}):s?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"status-badge bg-red-600 text-white",children:"ERROR"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-black rounded-full flex items-center justify-center",children:(0,a.jsxs)("svg",{className:"w-4 h-4 text-[#FFEB3B] animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,a.jsx)("span",{className:"status-badge bg-black text-[#FFEB3B]",children:"LOADING"})]})})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-12",children:[h&&(0,a.jsx)("div",{className:"mb-8 glass-card p-4 border-l-4 border-[#FFEB3B] animate-pulse",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-[#FFEB3B]",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),(0,a.jsx)("p",{className:"text-white font-medium",children:h})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"glass-card p-8 hover:border-[#FFEB3B] transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-[#FFEB3B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Wallet Connection"})]}),u?(0,a.jsx)("button",{onClick:()=>{o(""),d(0),x(!1),y(""),k(""),N(!1)},className:"btn-danger",children:"Disconnect"}):(0,a.jsxs)("button",{onClick:C,className:"btn-primary",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Connect"]})]}),u?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"info-card",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Status"}),(0,a.jsxs)("span",{className:"text-green-400 font-semibold flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Connected"]})]})}),(0,a.jsx)("div",{className:"info-card",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Address"}),(0,a.jsx)("span",{className:"code-text text-[#FFEB3B]",children:l})]})}),(0,a.jsx)("div",{className:"info-card",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Chain ID"}),(0,a.jsx)("span",{className:"text-white font-mono font-bold",children:c})]})}),(0,a.jsx)("div",{className:"info-card",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Contract"}),"Not supported chain"===g?(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-red-400 text-sm",children:"Not supported chain"}),(0,a.jsxs)("button",{onClick:B,disabled:j,className:"btn-primary text-xs px-3 py-1",children:[j?(0,a.jsxs)("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),j?"Switching...":"Switch to Sepolia"]})]}):(0,a.jsx)("span",{className:"code-text text-[#FFEB3B]",children:g})]})}),b&&(0,a.jsx)("div",{className:"info-card border-red-500/30 bg-red-500/5",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"text-red-400 text-sm",children:b})]})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-[#3A3A3A] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Connect your wallet to use FHEVM features"}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-[#0A0A0A] border border-[#FFEB3B]/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-[#FFEB3B]",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"text-[#FFEB3B] font-semibold text-xs",children:"Network Notice"})]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs leading-relaxed",children:[(0,a.jsx)("strong",{className:"text-[#FFEB3B]",children:"Important:"})," This app requires the Sepolia testnet. After connecting your wallet, you'll be prompted to switch to Sepolia if you're on a different network."]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,a.jsx)("svg",{className:"w-3 h-3 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"Next.js compatible FHEVM"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,a.jsx)("svg",{className:"w-3 h-3 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"No webpack bundling issues"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,a.jsx)("svg",{className:"w-3 h-3 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"Real contract interactions"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,a.jsx)("svg",{className:"w-3 h-3 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"Framework-agnostic core"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,a.jsx)("svg",{className:"w-3 h-3 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"Works in Next.js, React, Vue"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,a.jsx)("svg",{className:"w-3 h-3 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"Clean, simple API"})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-[#0A0A0A] border border-[#FFEB3B]/30 rounded-lg",children:(0,a.jsxs)("p",{className:"text-gray-400 text-xs leading-relaxed",children:[(0,a.jsx)("strong",{className:"text-[#FFEB3B]",children:"Note:"})," This is a demonstration using REAL FHEVM SDK from Zama's CDN. The SDK provides actual encryption/decryption functionality on Sepolia testnet."]})})]})]}),u&&t&&(0,a.jsx)(w,{account:l,chainId:c,isConnected:u,isInitialized:t,onMessage:y})]}),u&&t&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(m,{account:l,chainId:c,isConnected:u,isInitialized:t,onMessage:y}),(0,a.jsx)(p,{account:l,chainId:c,isConnected:u,isInitialized:t,onMessage:y})]})]})]})}function N(){return(0,a.jsx)(r.FhevmProvider,{children:(0,a.jsx)(j,{})})}},9991:(e,t,s)=>{"use strict";s.d(t,{FhevmProvider:()=>l,w:()=>o});var a=s(4750),n=s(6494),r=s(6513);let i=(0,n.createContext)(void 0);function l(e){let{children:t}=e,s=(0,r.vT)(),n=(0,r.wP)(),l=(0,r.ku)("",[]),o=(0,r.qD)(),c={address:s.address,isConnected:s.isConnected,chainId:s.chainId,isConnecting:s.isConnecting,walletError:s.error,connect:s.connect,disconnect:s.disconnect,fheInstance:n.instance,isInitialized:n.isInitialized,error:n.error,initialize:n.initialize,contract:l.contract,isContractReady:l.isReady,contractError:l.error,encrypt:o.encrypt,decrypt:o.decrypt,executeTransaction:o.executeTransaction,isBusy:o.isBusy,message:o.message};return(0,a.jsx)(i.Provider,{value:c,children:t})}function o(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useFhevm must be used within a FhevmProvider");return e}},6513:(e,t,s)=>{"use strict";s.d(t,{vz:()=>l,pN:()=>r,$v:()=>i,ku:()=>x,wP:()=>u,qD:()=>h,vT:()=>m});let a=null;async function n(){if(!window.ethereum)throw Error("Ethereum provider not found. Please install MetaMask or connect a wallet.");let e=window.RelayerSDK||window.relayerSDK;if(!e)throw Error('RelayerSDK not loaded. Please include the script tag in your HTML:\n<script src="https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs"></script>');let{initSDK:t,createInstance:s,SepoliaConfig:n}=e;await t();let r={...n,network:window.ethereum};try{return a=await s(r)}catch(e){throw console.error("FHEVM instance creation failed:",e),e}}async function r(e,t,s){let n=a;if(!n)throw Error("FHE instance not initialized. Call initializeFheInstance() first.");try{console.log("\uD83D\uDD10 Using EIP-712 user decryption for handle:",e);let a=n.generateKeypair(),r=Math.floor(Date.now()/1e3).toString(),i=[t],l=n.createEIP712(a.publicKey,i,r,"10"),o=await s.signTypedData(l.domain,{UserDecryptRequestVerification:l.types.UserDecryptRequestVerification},l.message),c=await n.userDecrypt([{handle:e,contractAddress:t}],a.privateKey,a.publicKey,o.replace("0x",""),i,await s.getAddress(),r,"10");return Number(c[e])}catch(e){var r,i;if((null==e?void 0:null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||(null==e?void 0:null===(i=e.message)||void 0===i?void 0:i.includes("NetworkError")))throw Error("Decryption service is temporarily unavailable. Please try again later.");throw e}}async function i(e){let t=a;if(!t)throw Error("FHE instance not initialized. Call initializeFheInstance() first.");try{if("string"==typeof e&&e.startsWith("0x")&&66===e.length){let s=await t.publicDecrypt([e]);return Number(s[e])}throw Error("Invalid ciphertext handle for decryption")}catch(e){var s,n;if((null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.includes("Failed to fetch"))||(null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.includes("NetworkError")))throw Error("Decryption service is temporarily unavailable. Please try again later.");throw e}}async function l(e,t,s){let n=a;if(!n)throw Error("FHE instance not initialized. Call initializeFheInstance() first.");console.log("\uD83D\uDD10 Creating encrypted input for contract ".concat(e,", user ").concat(t,", value ").concat(s));let r=n.createEncryptedInput(e,t);r.add32(s);let i=await r.encrypt();if(console.log("✅ Encrypted input created successfully"),console.log("\uD83D\uDD0D Encrypted result structure:",i),i&&"object"==typeof i){if(i.handles&&Array.isArray(i.handles)&&i.handles.length>0)return{encryptedData:i.handles[0],proof:i.inputProof};if(i.encryptedData&&i.proof)return{encryptedData:i.encryptedData,proof:i.proof}}return{encryptedData:i,proof:i}}var o=s(6494),c=s(6552),d=s(9181);function m(){let[e,t]=(0,o.useState)(""),[s,a]=(0,o.useState)(!1),[n,r]=(0,o.useState)(0),[i,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)("");return{address:e,isConnected:s,chainId:n,isConnecting:i,error:c,connect:(0,o.useCallback)(async()=>{if(!window.ethereum){d("MetaMask not found. Please install MetaMask.");return}l(!0),d("");try{let e=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];t(e),a(!0);let s=await window.ethereum.request({method:"eth_chainId"});r(parseInt(s,16)),console.log("✅ Wallet connected:",e)}catch(e){d(e instanceof Error?e.message:"Connection failed"),console.error("❌ Wallet connection failed:",e)}finally{l(!1)}},[]),disconnect:(0,o.useCallback)(()=>{t(""),a(!1),r(0),d(""),console.log("\uD83D\uDD0C Wallet disconnected")},[])}}function u(){let[e,t]=(0,o.useState)(null),[s,a]=(0,o.useState)("idle"),[r,i]=(0,o.useState)("");return{instance:e,status:s,error:r,initialize:(0,o.useCallback)(async()=>{a("loading"),i("");try{let e=await n();t(e),a("ready"),console.log("✅ FHEVM initialized")}catch(e){i(e instanceof Error?e.message:"Unknown error"),a("error"),console.error("❌ FHEVM initialization failed:",e)}},[]),isInitialized:"ready"===s}}function x(e,t){let[s,a]=(0,o.useState)(null),[n,r]=(0,o.useState)(!1),[i,l]=(0,o.useState)("");return(0,o.useEffect)(()=>{if(window.ethereum&&e&&t)try{let s=new c.k(window.ethereum),n=new d.NZ(e,t,s);a(n),r(!0),l("")}catch(e){l(e instanceof Error?e.message:"Contract setup failed"),r(!1)}},[e,t]),{contract:s,isReady:n,error:i}}function h(){let{decrypt:e,publicDecrypt:t,isDecrypting:s,error:a}=function(){let[e,t]=(0,o.useState)(!1),[s,a]=(0,o.useState)("");return{decrypt:(0,o.useCallback)(async(e,s,n)=>{t(!0),a("");try{return await r(e,s,n)}catch(e){throw a(e instanceof Error?e.message:"Decryption failed"),e}finally{t(!1)}},[]),publicDecrypt:(0,o.useCallback)(async e=>{t(!0),a("");try{return await i(e)}catch(e){throw a(e instanceof Error?e.message:"Public decryption failed"),e}finally{t(!1)}},[]),isDecrypting:e,error:s}}(),{encrypt:n,isEncrypting:c,error:d}=function(){let[e,t]=(0,o.useState)(!1),[s,a]=(0,o.useState)("");return{encrypt:(0,o.useCallback)(async(e,s,n)=>{t(!0),a("");try{return await l(e,s,n)}catch(e){throw a(e instanceof Error?e.message:"Encryption failed"),e}finally{t(!1)}},[]),isEncrypting:e,error:s}}(),[m,u]=(0,o.useState)(!1),[x,h]=(0,o.useState)("");return{encrypt:n,isEncrypting:c,encryptError:d,decrypt:e,publicDecrypt:t,isDecrypting:s,decryptError:a,executeTransaction:(0,o.useCallback)(async function(e,t,s,a){for(var n=arguments.length,r=Array(n>4?n-4:0),i=4;i<n;i++)r[i-4]=arguments[i];u(!0),h("Sending transaction...");try{let n=await e[t](s,a,...r);h("Waiting for confirmation...");let i=await n.wait();return h("Transaction confirmed!"),{tx:n,receipt:i}}catch(e){throw h("Transaction failed"),e}finally{u(!1),setTimeout(()=>h(""),3e3)}},[]),isProcessing:m,message:x,isBusy:c||s||m,hasError:!!(d||a)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[552,774,938,443,358],()=>t(9554)),_N_E=e.O()}]);