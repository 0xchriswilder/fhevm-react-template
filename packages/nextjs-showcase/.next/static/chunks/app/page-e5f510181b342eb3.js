(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9554:(e,a,t)=>{Promise.resolve().then(t.bind(t,6472))},6472:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var n=t(4750),s=t(6494),r=t(6552),l=t(9181),i=t(6513),c=t(9991);let o={31337:"0x40e8Aa088739445BC3a3727A724F56508899f65B",0xaa36a7:"0xead137D42d2E6A6a30166EaEf97deBA1C3D1954e"},d=[{inputs:[],name:"getCount",outputs:[{internalType:"euint32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"externalEuint32",name:"inputEuint32",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"increment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"externalEuint32",name:"inputEuint32",type:"bytes32"},{internalType:"bytes",name:"inputProof",type:"bytes"}],name:"decrement",outputs:[],stateMutability:"nonpayable",type:"function"}],m={encryptedCount:"0x42bbe4377f93c8e01c6ea6a9bfe98cab65b67b97e1ff0000000000aa36a70500",encryptedSum:"0x1495e50acd5cef684c3a9cae49e18a13d631768f70ff0000000000aa36a70500"};function u(){let{fheInstance:e,isInitialized:a,error:t,initialize:u}=(0,c.w)(),[h,p]=(0,s.useState)(""),[x,y]=(0,s.useState)(0),[g,f]=(0,s.useState)(!1),[b,w]=(0,s.useState)(""),[j,z]=(0,s.useState)(null),[N,v]=(0,s.useState)(!1),[k,E]=(0,s.useState)(""),[C,D]=(0,s.useState)(null),[S,M]=(0,s.useState)(null),[P,F]=(0,s.useState)(!1),I=o[x]||"Not supported chain";(0,s.useEffect)(()=>{!g||a||t||u().catch(console.error)},[g,a,t,u]);let T=async()=>{if(console.log("\uD83D\uDD17 Attempting to connect wallet..."),!window.ethereum){console.error("❌ No Ethereum provider found. Please install MetaMask or connect a wallet."),alert("Please install MetaMask or connect a wallet to use this app.");return}try{console.log("\uD83D\uDCF1 Requesting accounts...");let e=await window.ethereum.request({method:"eth_requestAccounts"});console.log("✅ Accounts received:",e);let a=await window.ethereum.request({method:"eth_chainId"});console.log("\uD83D\uDD17 Chain ID:",a),p(e[0]),y(parseInt(a,16)),f(!0),console.log("✅ Wallet connected successfully!")}catch(e){console.error("❌ Wallet connection failed:",e),alert("Wallet connection failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},A=async()=>{if(g&&I&&window.ethereum)try{E("Reading contract...");let e=new r.k(window.ethereum),a=new l.NZ(I,d,e),t=await a.getCount();w(t),E("Contract read successfully!"),setTimeout(()=>E(""),3e3)}catch(e){console.error("Get count failed:",e),E("Failed to get count")}},R=async()=>{if(b&&e&&window.ethereum)try{E("Decrypting with EIP-712 user decryption...");let e=new r.k(window.ethereum),a=await e.getSigner(),t=await (0,i.pN)(b,I,a);z(t),E("EIP-712 decryption completed!"),setTimeout(()=>E(""),3e3)}catch(e){console.error("Decryption failed:",e),E("Decryption failed")}},W=async()=>{if(g&&I&&window.ethereum&&e)try{v(!0),E("Starting increment transaction...");let e=new r.k(window.ethereum),a=await e.getSigner(),t=new l.NZ(I,d,a);E("Encrypting input...");let n=await (0,i.vz)(I,h,1);E("Sending transaction...");let s=await t.increment(n.encryptedData,n.proof);E("Waiting for confirmation...");let c=await s.wait();E("Increment completed!"),console.log("✅ Increment transaction completed:",c),setTimeout(()=>E(""),3e3)}catch(e){console.error("Increment failed:",e),E("Increment failed")}finally{v(!1)}},H=async()=>{if(g&&I&&window.ethereum&&e)try{v(!0),E("Starting decrement transaction...");let e=new r.k(window.ethereum),a=await e.getSigner(),t=new l.NZ(I,d,a);E("Encrypting input...");let n=await (0,i.vz)(I,h,1);E("Sending transaction...");let s=await t.decrement(n.encryptedData,n.proof);E("Waiting for confirmation...");let c=await s.wait();E("Decrement completed!"),console.log("✅ Decrement transaction completed:",c),setTimeout(()=>E(""),3e3)}catch(e){console.error("Decrement failed:",e),E("Decrement failed")}finally{v(!1)}},L=async()=>{if(a)try{F(!0),E("Testing public decryption...");let e=await (0,i.$v)(m.encryptedCount),a=await (0,i.$v)(m.encryptedSum);D(e),M(a),E("Public decryption completed!"),console.log("✅ Public decryption results:"),console.log("Count:",e),console.log("Sum:",a),setTimeout(()=>E(""),3e3)}catch(e){console.error("Public decryption failed:",e),E("Public decryption failed")}finally{F(!1)}};return(0,n.jsxs)("div",{className:"min-h-screen bg-zama-black text-white font-system",children:[(0,n.jsx)("header",{className:"bg-zama-yellow py-6 border-b border-zama-black z-50",children:(0,n.jsx)("div",{className:"max-w-6xl mx-auto px-8 text-center",children:(0,n.jsx)("h1",{className:"text-zama-black text-2xl font-bold m-0",children:"Universal FHEVM SDK - Next.js Showcase"})})}),(0,n.jsx)("main",{className:"bg-zama-black min-h-[calc(100vh-120px)] py-8",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-8",children:[(0,n.jsxs)("div",{className:"zama-section",children:[(0,n.jsxs)("div",{className:"zama-section-header",children:[(0,n.jsx)("h2",{className:"zama-title",children:"FHEVM Status"}),(0,n.jsx)("span",{className:"zama-status-badge ".concat(a?"zama-status-ready":t?"zama-status-error":"zama-status-loading"),children:a?"READY":t?"ERROR":"LOADING"})]}),(0,n.jsxs)("div",{className:"zama-section-content",children:[t&&(0,n.jsxs)("p",{className:"zama-error",children:["Error: ",t]}),a&&(0,n.jsx)("p",{className:"zama-success",children:"FHEVM Ready"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[(0,n.jsxs)("div",{className:"zama-section",children:[(0,n.jsxs)("div",{className:"zama-section-header",children:[(0,n.jsx)("h2",{className:"zama-title",children:"Wallet Connection"}),g?(0,n.jsxs)("button",{onClick:()=>{p(""),y(0),f(!1),w(""),z(null),E("")},className:"zama-btn zama-btn-danger",children:[(0,n.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M9 18l6-6-6-6"})}),"Disconnect"]}):(0,n.jsx)("button",{onClick:T,className:"zama-btn zama-btn-warning",children:"Connect Wallet"})]}),(0,n.jsx)("div",{className:"p-4",children:g?(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsxs)("div",{className:"zama-info-item",children:[(0,n.jsx)("span",{className:"zama-label",children:"Status:"}),(0,n.jsx)("span",{className:"zama-success",children:"Connected"})]}),(0,n.jsxs)("div",{className:"zama-info-item",children:[(0,n.jsx)("span",{className:"zama-label",children:"Address:"}),(0,n.jsx)("span",{className:"zama-address",children:h})]}),(0,n.jsxs)("div",{className:"zama-info-item",children:[(0,n.jsx)("span",{className:"zama-label",children:"Chain ID:"}),(0,n.jsx)("span",{className:"zama-value",children:x})]}),(0,n.jsxs)("div",{className:"zama-info-item",children:[(0,n.jsx)("span",{className:"zama-label",children:"Contract:"}),(0,n.jsx)("span",{className:"zama-address",children:I})]})]}):(0,n.jsx)("div",{className:"text-center py-4",children:(0,n.jsx)("p",{className:"text-zama-gray-100",children:"Connect your wallet to use FHEVM features"})})})]}),(0,n.jsxs)("div",{className:"zama-section",children:[(0,n.jsxs)("div",{className:"zama-section-header",children:[(0,n.jsx)("h2",{className:"zama-title",children:"Universal FHEVM SDK"}),(0,n.jsx)("p",{className:"zama-subtitle",children:"Next.js compatible implementation"})]}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"grid gap-2 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("span",{className:"text-zama-green font-bold text-lg",children:"✓"}),(0,n.jsx)("span",{className:"text-zama-gray-100 text-sm",children:"Next.js compatible FHEVM"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("span",{className:"text-zama-green font-bold text-lg",children:"✓"}),(0,n.jsx)("span",{className:"text-zama-gray-100 text-sm",children:"No webpack bundling issues"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("span",{className:"text-zama-green font-bold text-lg",children:"✓"}),(0,n.jsx)("span",{className:"text-zama-gray-100 text-sm",children:"Real contract interactions"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("span",{className:"text-zama-green font-bold text-lg",children:"✓"}),(0,n.jsx)("span",{className:"text-zama-gray-100 text-sm",children:"Framework-agnostic core"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("span",{className:"text-zama-green font-bold text-lg",children:"✓"}),(0,n.jsx)("span",{className:"text-zama-gray-100 text-sm",children:"Works in Next.js, React, Vue"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("span",{className:"text-zama-green font-bold text-lg",children:"✓"}),(0,n.jsx)("span",{className:"text-zama-gray-100 text-sm",children:"Clean, simple API"})]})]}),(0,n.jsxs)("div",{className:"text-zama-gray-200 text-xs p-3 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("strong",{children:"Note:"})," This is a demonstration using REAL FHEVM SDK from Zama's CDN. The SDK provides actual encryption/decryption functionality on Sepolia testnet."]})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[g&&a&&(0,n.jsxs)("div",{className:"zama-section",children:[(0,n.jsxs)("div",{className:"zama-section-header",children:[(0,n.jsx)("h2",{className:"zama-title",children:"FHEVM Counter Demo"}),(0,n.jsx)("p",{className:"zama-subtitle",children:"Using REAL FHEVM SDK on Sepolia testnet"})]}),(0,n.jsx)("div",{className:"zama-section-content",children:(0,n.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("button",{onClick:A,className:"zama-btn zama-btn-primary",children:[(0,n.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M3 3v18h18"}),(0,n.jsx)("path",{d:"M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"})]}),"Get Count"]}),b&&(0,n.jsxs)("div",{className:"p-4 bg-zama-black rounded-lg border border-zama-gray-400 flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"zama-label",children:"Handle:"}),(0,n.jsx)("span",{className:"zama-handle",children:b})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("button",{onClick:R,disabled:!b,className:"zama-btn zama-btn-success",children:[(0,n.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),(0,n.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Decrypt Count"]}),null!==j&&(0,n.jsxs)("div",{className:"p-4 bg-zama-black rounded-lg border border-zama-gray-400 flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"zama-label",children:"Decrypted Count:"}),(0,n.jsx)("span",{className:"zama-result",children:j})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("button",{onClick:W,disabled:N,className:"zama-btn zama-btn-warning",children:[(0,n.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M5 12h14"}),(0,n.jsx)("path",{d:"M12 5v14"})]}),"Increment"]}),(0,n.jsxs)("button",{onClick:H,disabled:N,className:"zama-btn zama-btn-danger",children:[(0,n.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M5 12h14"})}),"Decrement"]})]}),k&&(0,n.jsx)("div",{className:"zama-message",children:k})]})})]}),a&&(0,n.jsxs)("div",{className:"zama-section",children:[(0,n.jsxs)("div",{className:"zama-section-header",children:[(0,n.jsx)("h2",{className:"zama-title",children:"Public Decryption Demo"}),(0,n.jsx)("p",{className:"zama-subtitle",children:"Testing public decryption with hardcoded ciphertexts"})]}),(0,n.jsx)("div",{className:"zama-section-content",children:(0,n.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"p-4 bg-zama-black rounded-lg border border-zama-gray-400 flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"zama-label",children:"Encrypted Count Ciphertext:"}),(0,n.jsx)("span",{className:"zama-handle",children:m.encryptedCount})]}),(0,n.jsxs)("div",{className:"p-4 bg-zama-black rounded-lg border border-zama-gray-400 flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"zama-label",children:"Encrypted Sum Ciphertext:"}),(0,n.jsx)("span",{className:"zama-handle",children:m.encryptedSum})]})]}),(0,n.jsx)("div",{className:"flex flex-col gap-4",children:(0,n.jsxs)("button",{onClick:L,disabled:P,className:"zama-btn zama-btn-primary",children:[(0,n.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),(0,n.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),P?"Decrypting...":"Test Public Decrypt"]})}),(null!==C||null!==S)&&(0,n.jsxs)("div",{className:"p-4 bg-zama-black rounded-lg border border-zama-gray-400 flex flex-col gap-4",children:[(0,n.jsx)("h3",{className:"text-zama-yellow text-lg font-semibold mb-2",children:"Public Decryption Results:"}),null!==C&&(0,n.jsxs)("div",{className:"zama-info-item",children:[(0,n.jsx)("span",{className:"zama-label",children:"Decrypted Count:"}),(0,n.jsx)("span",{className:"zama-result",children:C})]}),null!==S&&(0,n.jsxs)("div",{className:"zama-info-item",children:[(0,n.jsx)("span",{className:"zama-label",children:"Decrypted Sum:"}),(0,n.jsx)("span",{className:"zama-result",children:S})]}),(0,n.jsx)("div",{className:"text-zama-gray-200 text-sm mt-2",children:"These values were decrypted using public decryption (no user signature required)"}),(0,n.jsxs)("div",{className:"text-zama-gray-200 text-xs mt-3 p-3 bg-zama-black rounded-lg border border-zama-gray-400",children:[(0,n.jsx)("strong",{children:"Source:"})," The encrypted count and sum ciphertexts are from the"," ",(0,n.jsx)("a",{href:"https://sepolia.etherscan.io/address/0xb218c0a83fb718683ddbf97b56e01df3de3bfcf3#code",target:"_blank",rel:"noopener noreferrer",className:"text-zama-yellow hover:text-yellow-400 underline",children:"FReviewCardsFHE.sol contract"})," ","on Sepolia. These ciphertexts are publicly decryptable, demonstrating the public decryption functionality."]})]})]})})]})]})]})})]})}function h(){return(0,n.jsx)(c.FhevmProvider,{children:(0,n.jsx)(u,{})})}},9991:(e,a,t)=>{"use strict";t.d(a,{FhevmProvider:()=>i,w:()=>c});var n=t(4750),s=t(6494),r=t(6513);let l=(0,s.createContext)(void 0);function i(e){let{children:a}=e,t=(0,r.vT)(),s=(0,r.wP)(),i=(0,r.ku)("",[]),c=(0,r.qD)(),o={address:t.address,isConnected:t.isConnected,chainId:t.chainId,isConnecting:t.isConnecting,walletError:t.error,connect:t.connect,disconnect:t.disconnect,fheInstance:s.instance,isInitialized:s.isInitialized,error:s.error,initialize:s.initialize,contract:i.contract,isContractReady:i.isReady,contractError:i.error,encrypt:c.encrypt,decrypt:c.decrypt,executeTransaction:c.executeTransaction,isBusy:c.isBusy,message:c.message};return(0,n.jsx)(l.Provider,{value:o,children:a})}function c(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useFhevm must be used within a FhevmProvider");return e}},6513:(e,a,t)=>{"use strict";t.d(a,{vz:()=>i,pN:()=>r,$v:()=>l,ku:()=>h,wP:()=>u,qD:()=>p,vT:()=>m});let n=null;async function s(){if(!window.ethereum)throw Error("Ethereum provider not found. Please install MetaMask or connect a wallet.");let e=window.RelayerSDK||window.relayerSDK;if(!e)throw Error('RelayerSDK not loaded. Please include the script tag in your HTML:\n<script src="https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs"></script>');let{initSDK:a,createInstance:t,SepoliaConfig:s}=e;await a();let r={...s,network:window.ethereum};try{return n=await t(r)}catch(e){throw console.error("FHEVM instance creation failed:",e),e}}async function r(e,a,t){let s=n;if(!s)throw Error("FHE instance not initialized. Call initializeFheInstance() first.");try{console.log("\uD83D\uDD10 Using EIP-712 user decryption for handle:",e);let n=s.generateKeypair(),r=Math.floor(Date.now()/1e3).toString(),l=[a],i=s.createEIP712(n.publicKey,l,r,"10"),c=await t.signTypedData(i.domain,{UserDecryptRequestVerification:i.types.UserDecryptRequestVerification},i.message),o=await s.userDecrypt([{handle:e,contractAddress:a}],n.privateKey,n.publicKey,c.replace("0x",""),l,await t.getAddress(),r,"10");return Number(o[e])}catch(e){var r,l;if((null==e?void 0:null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||(null==e?void 0:null===(l=e.message)||void 0===l?void 0:l.includes("NetworkError")))throw Error("Decryption service is temporarily unavailable. Please try again later.");throw e}}async function l(e){let a=n;if(!a)throw Error("FHE instance not initialized. Call initializeFheInstance() first.");try{if("string"==typeof e&&e.startsWith("0x")&&66===e.length){let t=await a.publicDecrypt([e]);return Number(t[e])}throw Error("Invalid ciphertext handle for decryption")}catch(e){var t,s;if((null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.includes("Failed to fetch"))||(null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.includes("NetworkError")))throw Error("Decryption service is temporarily unavailable. Please try again later.");throw e}}async function i(e,a,t){let s=n;if(!s)throw Error("FHE instance not initialized. Call initializeFheInstance() first.");console.log("\uD83D\uDD10 Creating encrypted input for contract ".concat(e,", user ").concat(a,", value ").concat(t));let r=s.createEncryptedInput(e,a);r.add32(t);let l=await r.encrypt();if(console.log("✅ Encrypted input created successfully"),console.log("\uD83D\uDD0D Encrypted result structure:",l),l&&"object"==typeof l){if(l.handles&&Array.isArray(l.handles)&&l.handles.length>0)return{encryptedData:l.handles[0],proof:l.inputProof};if(l.encryptedData&&l.proof)return{encryptedData:l.encryptedData,proof:l.proof}}return{encryptedData:l,proof:l}}var c=t(6494),o=t(6552),d=t(9181);function m(){let[e,a]=(0,c.useState)(""),[t,n]=(0,c.useState)(!1),[s,r]=(0,c.useState)(0),[l,i]=(0,c.useState)(!1),[o,d]=(0,c.useState)("");return{address:e,isConnected:t,chainId:s,isConnecting:l,error:o,connect:(0,c.useCallback)(async()=>{if(!window.ethereum){d("MetaMask not found. Please install MetaMask.");return}i(!0),d("");try{let e=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];a(e),n(!0);let t=await window.ethereum.request({method:"eth_chainId"});r(parseInt(t,16)),console.log("✅ Wallet connected:",e)}catch(e){d(e instanceof Error?e.message:"Connection failed"),console.error("❌ Wallet connection failed:",e)}finally{i(!1)}},[]),disconnect:(0,c.useCallback)(()=>{a(""),n(!1),r(0),d(""),console.log("\uD83D\uDD0C Wallet disconnected")},[])}}function u(){let[e,a]=(0,c.useState)(null),[t,n]=(0,c.useState)("idle"),[r,l]=(0,c.useState)("");return{instance:e,status:t,error:r,initialize:(0,c.useCallback)(async()=>{n("loading"),l("");try{let e=await s();a(e),n("ready"),console.log("✅ FHEVM initialized")}catch(e){l(e instanceof Error?e.message:"Unknown error"),n("error"),console.error("❌ FHEVM initialization failed:",e)}},[]),isInitialized:"ready"===t}}function h(e,a){let[t,n]=(0,c.useState)(null),[s,r]=(0,c.useState)(!1),[l,i]=(0,c.useState)("");return(0,c.useEffect)(()=>{if(window.ethereum&&e&&a)try{let t=new o.k(window.ethereum),s=new d.NZ(e,a,t);n(s),r(!0),i("")}catch(e){i(e instanceof Error?e.message:"Contract setup failed"),r(!1)}},[e,a]),{contract:t,isReady:s,error:l}}function p(){let{decrypt:e,publicDecrypt:a,isDecrypting:t,error:n}=function(){let[e,a]=(0,c.useState)(!1),[t,n]=(0,c.useState)("");return{decrypt:(0,c.useCallback)(async(e,t,s)=>{a(!0),n("");try{return await r(e,t,s)}catch(e){throw n(e instanceof Error?e.message:"Decryption failed"),e}finally{a(!1)}},[]),publicDecrypt:(0,c.useCallback)(async e=>{a(!0),n("");try{return await l(e)}catch(e){throw n(e instanceof Error?e.message:"Public decryption failed"),e}finally{a(!1)}},[]),isDecrypting:e,error:t}}(),{encrypt:s,isEncrypting:o,error:d}=function(){let[e,a]=(0,c.useState)(!1),[t,n]=(0,c.useState)("");return{encrypt:(0,c.useCallback)(async(e,t,s)=>{a(!0),n("");try{return await i(e,t,s)}catch(e){throw n(e instanceof Error?e.message:"Encryption failed"),e}finally{a(!1)}},[]),isEncrypting:e,error:t}}(),[m,u]=(0,c.useState)(!1),[h,p]=(0,c.useState)("");return{encrypt:s,isEncrypting:o,encryptError:d,decrypt:e,publicDecrypt:a,isDecrypting:t,decryptError:n,executeTransaction:(0,c.useCallback)(async function(e,a,t,n){for(var s=arguments.length,r=Array(s>4?s-4:0),l=4;l<s;l++)r[l-4]=arguments[l];u(!0),p("Sending transaction...");try{let s=await e[a](t,n,...r);p("Waiting for confirmation...");let l=await s.wait();return p("Transaction confirmed!"),{tx:s,receipt:l}}catch(e){throw p("Transaction failed"),e}finally{u(!1),setTimeout(()=>p(""),3e3)}},[]),isProcessing:m,message:h,isBusy:o||t||m,hasError:!!(d||n)}}}},e=>{var a=a=>e(e.s=a);e.O(0,[552,938,443,358],()=>a(9554)),_N_E=e.O()}]);